<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <meta name="theme-color" content="#1a73e8" />
    <meta
      name="description"
      content="小跑豬家具海運專線 - 專業淘寶家具集運，透明費率，一鍵試算"
    />
    <title>小跑豬傢俱海運試算 | 傢俱專線</title>

    <link rel="icon" href="assets/logo.png" type="image/png" />
    <link rel="stylesheet" href="css/modals-unified.css" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <script src="js/styleLoader.js"></script>

    <style>
      body {
        opacity: 0;
        transition: opacity 0.3s ease-in;
      }
      body.loaded {
        opacity: 1;
      }

      /* 公告欄基本動畫 */
      #announcement-bar {
        display: none;
        padding: 12px;
        text-align: center;
        color: white;
        font-weight: bold;
        position: relative;
        z-index: 1001;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        animation: slideDown 0.5s ease-out;
      }
      @keyframes slideDown {
        from {
          transform: translateY(-100%);
        }
        to {
          transform: translateY(0);
        }
      }
    </style>

    <script>
      // 頁面載入後顯示內容
      window.addEventListener("DOMContentLoaded", () =>
        document.body.classList.add("loaded")
      );
    </script>
  </head>

  <body class="shopping-theme">
    <div class="app-layout-wrapper">
      <div id="announcement-bar"></div>

      <header class="site-header">
        <div class="header-container">
          <a href="index.html" class="logo-link">
            <img
              src="assets/logo.png"
              alt="小跑豬集運"
              class="header-logo-img"
            />
            <span class="logo-text">
              小跑豬
              <small>家具海運專線</small>
            </span>
          </a>

          <nav class="header-nav main-nav"></nav>
        </div>
      </header>

      <div class="container main-content">
        <div class="warehouse-card animate-slide-up">
          <div class="warehouse-header">
            <div class="wh-title">
              <div class="wh-icon"><i class="fas fa-warehouse"></i></div>
              <h3>傢俱倉地址 <span class="badge-official">官方認證</span></h3>
            </div>
            <button id="copyAddressBtn" class="btn btn-outline-primary btn-sm">
              <i class="far fa-copy"></i> 一鍵複製
            </button>
          </div>

          <div class="warehouse-body" id="warehouseAddressBox">
            <div class="wh-info-row">
              <span class="label">收件人</span>
              <span class="value" id="wh-recipient">小跑豬+[您的姓名]</span>
            </div>
            <div class="wh-info-row">
              <span class="label">電話</span>
              <span class="value" id="wh-phone">13652554906</span>
            </div>
            <div class="wh-info-row">
              <span class="label">郵編</span>
              <span class="value" id="wh-zip">523920</span>
            </div>
            <div class="wh-info-row full-width">
              <span class="label">倉庫地址</span>
              <span class="value" id="wh-address">載入中...</span>
              <div class="wh-notice">
                <i class="fas fa-exclamation-circle"></i>
                請務必在收件人後方加上您的會員姓名或 ID，以免包裹無法識別。
              </div>
            </div>
          </div>
        </div>

        <div class="rate-section-wrapper">
          <div class="section-header-row">
            <h3><i class="fas fa-tags"></i> 收費標準</h3>
            <button
              class="btn btn-secondary btn-sm"
              onclick="document.getElementById('rate-details-panel').classList.toggle('hidden')"
            >
              查看詳情 <i class="fas fa-chevron-down"></i>
            </button>
          </div>

          <div id="rate-details-panel" class="rate-details hidden">
            <div class="rate-table-container">
              <table class="rate-table">
                <thead>
                  <tr>
                    <th>類別</th>
                    <th>說明</th>
                    <th>重量費率 (KG)</th>
                    <th>材積費率 (材)</th>
                  </tr>
                </thead>
                <tbody id="rate-table-body">
                  <tr>
                    <td colspan="4" class="text-center p-20 text-sub">
                      載入費率中...
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="rate-notes">
              <strong><i class="fas fa-info-circle"></i> 注意事項：</strong>
              <ul id="rate-notes-list">
                <li>載入中...</li>
              </ul>
            </div>
          </div>
        </div>

        <div id="calculator-section" class="calculator-wrapper section-card">
          <div class="section-header-row">
            <h3><i class="fas fa-calculator"></i> 運費試算</h3>
            <span class="text-sub" style="font-size: 12px">
              已有
              <span
                id="usageCount"
                class="text-accent"
                style="font-weight: bold"
                >5000+</span
              >
              人使用
            </span>
          </div>

          <div id="item-list" class="shopping-list"></div>

          <div class="p-20">
            <button id="btn-add-item" class="btn-dashed-add">
              <i class="fas fa-plus"></i> 加入下一件商品
            </button>
          </div>

          <div
            class="delivery-block"
            style="border-top: 1px solid var(--border-light); padding: 20px"
          >
            <div class="form-group mb-0">
              <label for="deliveryLocation" class="form-label">
                <i
                  class="fas fa-map-marker-alt text-accent"
                  style="margin-right: 8px"
                ></i>
                配送目的地 <span class="text-danger">*</span>
              </label>
              <select id="deliveryLocation" class="form-control">
                <option value="" selected disabled>
                  --- 載入地區資料中 ---
                </option>
              </select>

              <div
                id="remoteAreaInfo"
                class="alert-modern alert-info"
                style="display: none; margin-top: 15px"
              >
                <i class="fas fa-info-circle"></i>
                已選擇：<strong id="selectedAreaName"></strong>
                <span
                  id="selectedAreaFee"
                  class="text-danger"
                  style="margin-left: 5px; font-weight: bold"
                ></span>
              </div>
            </div>
          </div>
        </div>

        <div class="sticky-footer-bar">
          <div class="footer-content">
            <div class="footer-total">
              <span class="text">預估總運費：</span>
              <span class="price" id="sticky-total-price"> 0</span>
            </div>
            <button type="button" id="btn-calculate" class="btn btn-checkout">
              開始計算
            </button>
          </div>
        </div>

        <div class="safe-area-spacer"></div>

        <div id="loading-spinner" class="loading-overlay" style="display: none">
          <div class="spinner-apple"></div>
          <p class="mt-20" style="font-weight: 500">正在精算運費...</p>
        </div>

        <div
          id="error-message"
          class="alert-modern alert-error"
          style="display: none"
        ></div>

        <div
          id="results-container"
          style="display: none; margin-top: 20px"
        ></div>
      </div>

      <footer class="site-footer">
        <div class="site-footer__container">
          <div class="footer-links">
            <a href="https://lin.ee/eK6HptX" target="_blank" class="nav-link">
              <i class="fab fa-line"></i> LINE 客服
            </a>
            <a href="mailto:2runtigers@gmail.com" class="nav-link">
              <i class="fas fa-envelope"></i> Email
            </a>
          </div>
          <div class="site-footer__copyright">
            © 2025 兩隻老虎國際貿易有限公司<br />
            <a
              href="admin-login.html"
              class="text-sub"
              style="font-size: 11px"
            ></a>
          </div>
        </div>
      </footer>
    </div>
    <nav id="mobile-bottom-nav" class="universal-bottom-nav"></nav>

    <script src="js/apiConfig.js"></script>
    <script src="js/shippingData.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
