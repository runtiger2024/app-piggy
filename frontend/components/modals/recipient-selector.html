<div id="recipient-selector-modal" class="modal-overlay" style="display: none">
  <div class="modal-content animate-zoom-in">
    <div class="modal-header">
      <h3>
        <i
          class="fas fa-address-book"
          style="color: #1a73e8; margin-right: 10px"
        ></i
        >選擇常用收件人
      </h3>
      <button
        class="modal-close"
        onclick="document.getElementById('recipient-selector-modal').style.display='none'"
      >
        &times;
      </button>
    </div>

    <div class="modal-body">
      <div class="search-input-group-wrapper" style="margin-bottom: 20px">
        <div class="search-input-group">
          <i class="fas fa-search"></i>
          <input
            type="text"
            id="recipient-selector-search"
            class="form-control"
            placeholder="輸入收件人姓名或電話快速過濾..."
            autocomplete="off"
          />
        </div>
        <div
          style="
            font-size: 12px;
            color: #64748b;
            margin-top: 8px;
            padding-left: 5px;
          "
        >
          <i class="fas fa-info-circle"></i> 點擊下方項目即可自動帶入集運單資料
        </div>
      </div>

      <div
        id="recipient-selector-list"
        class="recipient-selector-list custom-scrollbar"
        style="max-height: 450px; overflow-y: auto; padding: 2px"
      >
        <div style="text-align: center; padding: 40px; color: #94a3b8">
          <i class="fas fa-spinner fa-spin fa-2x"></i>
          <p style="margin-top: 10px">正在載入常用收件人...</p>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button
        class="btn btn-secondary"
        onclick="document.getElementById('recipient-selector-modal').style.display='none'"
      >
        取消返回
      </button>
      <button
        class="btn btn-primary-light"
        onclick="document.getElementById('recipient-selector-modal').style.display='none'; if(document.getElementById('create-shipment-modal')) document.getElementById('create-shipment-modal').style.display='none'; document.getElementById('tab-recipients').click();"
        style="background: #eff6ff; color: #1a73e8; border: none"
      >
        <i class="fas fa-plus"></i> 管理收件人
      </button>
    </div>
  </div>
</div>

<style>
  /* 彈窗內容基礎動畫與樣式 */
  .animate-zoom-in {
    animation: modalZoomIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  @keyframes modalZoomIn {
    from {
      opacity: 0;
      transform: scale(0.9) translateY(20px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  /* 搜尋框強化樣式 */
  .search-input-group-wrapper .search-input-group {
    position: relative;
    display: flex;
    align-items: center;
  }

  .search-input-group-wrapper .search-input-group i {
    position: absolute;
    left: 15px;
    color: #94a3b8;
  }

  .search-input-group-wrapper .search-input-group input {
    padding: 12px 12px 12px 40px;
    border-radius: 12px;
    border: 1px solid #e2e8f0;
    width: 100%;
    font-size: 15px;
    transition: all 0.2s;
  }

  .search-input-group-wrapper .search-input-group input:focus {
    border-color: #1a73e8;
    box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
    outline: none;
  }

  /* 列表項目樣式優化 */
  .recipient-selector-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .recipient-selector-item {
    padding: 16px;
    border: 1px solid #e2e8f0;
    border-radius: 14px;
    cursor: pointer;
    background: #fff;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
  }

  .recipient-selector-item:hover {
    background: #f8fafc;
    border-color: #1a73e8;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  }

  .recipient-selector-item:active {
    transform: translateY(0);
    background: #f1f5f9;
  }

  /* 預設標籤樣式 */
  .recipient-selector-item .badge-default-tiny {
    background: #eef2ff;
    color: #4f46e5;
    font-size: 11px;
    padding: 2px 8px;
    border-radius: 50px;
    font-weight: 700;
    margin-right: 8px;
  }

  /* 自定義捲軸 */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 10px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 10px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
  }

  /* 查無結果狀態 */
  .selector-empty-state {
    text-align: center;
    padding: 40px 20px;
    color: #94a3b8;
  }
  .selector-empty-state i {
    font-size: 40px;
    margin-bottom: 15px;
    opacity: 0.5;
  }
</style>
